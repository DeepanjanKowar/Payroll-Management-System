/* ========================================================================
 * Bootstrap: transition.js v3.2.0
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.2.0
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!r&&o.toggle&&"show"==t&&(t=!t),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=e.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var r=i.data("bs.collapse");if(r&&r.transitioning)return;t.call(i,"hide"),r||i.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var s=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=e.fn.collapse;e.fn.collapse=t,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var i,r=e(this),o=r.attr("data-target")||n.preventDefault()||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),a=e(o),s=a.data("bs.collapse"),l=s?"toggle":r.data(),u=r.attr("data-parent"),c=u&&e(u);s&&s.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+u+'"]').not(r).addClass("collapsed"),r[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),t.call(a,l)})}(jQuery),function(){this.MobileRegPath||(this.MobileRegPath={}),this.MobileRegPath.notifier=new c.Server.Notification("msutd"),this.MobileRegPath.notifier.notifyAndLog=function(e,t){return null==t&&(t={}),$a.log(e),this.notify({event_type:e,location:null!=t.location?t.location:void 0,attachment_id:null!=t.attachment_id?t.attachment_id:void 0,auvid:$auvid})}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/layout"]=function(e){var t=[],n=e||{};return function(e){t.push('<div id="mobile_reg_path" class="DesignSystem"><div class="full-screen-modal-header u-pv4x u-taCenter"><img'+jade.attr("src",""+e("academia-logo-redesign-2015.svg"),!0,!1)+jade.attr("onerror","this.onerror=null;this.src="+e("academia-logo-redesign-2015.png"),!0,!1)+' class="swp-mobile-signup-modal-header-logo"/><span class="swp-mobile-signup-modal-header-close u-positionAbsolute close-full-screen-modal u-clickable u-fs18 u-tcGrayDark">&times;</span></div><div class="container-fluid"><div class="row"><div class="col-xs-12"><div class="full-screen-modal-page-header u-taCenter u-mv4x"><span class="modal-page-header js-modal-page-header u-fs16"></span></div></div><div class="col-xs-12"><div class="full-screen-modal-page-content u-p0x"></div></div></div></div></div>')}.call(this,"$image_url"in n?n.$image_url:"undefined"!=typeof $image_url?$image_url:void 0),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/no_suggested_users"]=function(){var e=[];return e.push('<li class="u-pv8x"><div class="u-fs24 u-tcGray u-lineHeight1_3">None of your friends are on Academia</div></li>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/enter_email_page"]=function(){var e=[];return e.push('<form class="js-mobile-signup-modal-email-form"><input type="email" placeholder="Email" class="js-email TextInput"/><div class="u-mt3x"><input type="submit" disabled="disabled" value="Submit" class="js-submit-email Button Button--block Button--disabled"/></div></form>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/enter_name_page"]=function(){var e=[];return e.push('<form class="js-mobile-signup-modal-final-form"><input type="text" placeholder="First Name" id="user_first_name" class="TextInput js-first-name"/><div class="u-mt3x"><input type="text" placeholder="Last Name" id="user_last_name" class="TextInput js-last-name"/></div><div class="u-mt3x"><input type="password" placeholder="Password" id="user_password" class="TextInput js-password"/></div><div class="u-mt3x"><input type="submit" disabled="disabled" value="Submit" class="js-submit-name Button Button--block Button--green"/></div></form>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/sent_email_page"]=function(){var e=[];return e.push('<div class="u-taCenter u-mb4x"><i class="fa fa-check-circle-o u-tcGreen u-fs16"></i>&nbsp;&nbsp;<span class="u-tcGreen u-fw700 u-fs16">Email Sent</span></div><button class="js-sent-email-finished Button Button--inverseGray Button--mobile-xxl Button--block">Continue Reading</button>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/sent_email_with_fb_page"]=function(){var e=[];return e.push('<div class="u-taCenter"><i class="fa fa-check-circle-o u-tcGreen u-fs16"></i>&nbsp;&nbsp;<span class="u-tcGreen u-fw700 u-fs16">Email Sent</span></div><div class="u-mb6x"><button class="js-swp-mobile-signup-fb-connect Button Button--facebook Button--block u-mt4x"><i class="fa fa-facebook"></i>&nbsp;&nbsp; Find Friends</button></div><div class="js-suggested-academics u-fs20 u-pb6x hidden u-taCenter">Suggested Academics</div><ul class="js-user-suggestions-list swp-mobile-signup-user-suggestions-list list-unstyled"></ul><div class="swp-mobile-signup-close-fb-bar u-p4x u-bgColorWhite js-mobile-follow-all hidden"><button class="js-sent-email-finished Button Button--green Button--lg Button--block">follow all</button></div>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/suggested_user"]=function(e){var t,n=[],i=e||{};return function(e,i){var r=i.user;n.push('<div class="u-displayFlex u-alignItemsCenter"><img'+jade.attr("src",r.photo,!0,!1)+' class="Avatar Avatar--sm u-mr2x"/><div class="u-flexGrow1 u-textTruncate"><div class="u-fs14 u-textTruncate u-fw700">'+jade.escape(null==(t=r.display_name)?"":t)+'</div><div class="u-fs13 u-textTruncate">'+jade.escape(null==(t=e)?"":t)+'</div></div><div class="u-ml2x"><button'+jade.attr("data-follow-user-id",r.id,!0,!1)+' data-follow-user-source="mobile_signup_to_download"'+jade.attr("style",i.followedByCurrentUser?"display: none":!1,!0,!1)+' class="Button Button Button--green Button--sm u-ph2x">Follow</button><button'+jade.attr("data-unfollow-user-id",r.id,!0,!1)+jade.attr("style",i.followedByCurrentUser?!1:"display: none",!0,!1)+' class="Button Button--inverseGreen Button--sm u-ph2x">Following</button></div></div>')}.call(this,"reason"in i?i.reason:"undefined"!=typeof reason?reason:void 0,"suggestion"in i?i.suggestion:"undefined"!=typeof suggestion?suggestion:void 0),n.join("")}}.call(this),function(){this.MobileRegPath.Layout=Backbone.View.extend({template:"mobile_reg_path/templates/layout",events:{"click .close-full-screen-modal":"closeMobileRegPath","click .js-sent-email-finished":function(){return this.closeMobileRegPath(!1)}},initialize:function(e){return this.container=$("#full-screen-modal"),this.attachment_id=e.attachment_id,this.model=new MobileRegPath.newUser({attachment_id:this.attachment_id,user_source:"mobile_download"}),this.container.html(this.render().el),this.container.fadeIn()},render:function(){return this.$el.html(JST[this.template]()),this.postRender(),this},postRender:function(){return this.ui={$headerText:this.$(".js-modal-page-header"),$pageContent:this.$(".full-screen-modal-page-content")},this.initializePageManager()},resetModel:function(){return this.model=new MobileRegPath.NewUser({attachment_id:this.attachment_id,user_source:"mobile_download"})},closeMobileRegPath:function(e){return null==e&&(e=!0),e&&MobileRegPath.notifier.notifyAndLog("download_closed",{attachment_id:this.attachment_id,location:this.pageManager.currentView.el.id}),this.container.fadeOut(),this.container.html(""),MobileRegPath.close=!1,"sent-email-page"===this.pageManager.currentView.el.id||"sent-email-fb-page"===this.pageManager.currentView.el.id?$(".js-swp-mobile-get-pdf-footer").remove():void 0},steps:function(){return[{viewClass:MobileRegPath.EnterEmailPage,options:{model:this.model}},{viewClass:MobileRegPath.EnterNamePage,shouldSkip:function(e){return function(){return e.skipNamePage()}}(this),options:{model:this.model}},{viewClass:MobileRegPath.SentEmailPage,shouldSkip:function(e){return function(){return e.skipSentEmailPage()}}(this),options:{model:this.model}},{viewClass:MobileRegPath.SentEmailWithFbPage,shouldSkip:function(e){return function(){return e.skipSentEmailFbPage()}}(this),options:{model:this.model}}]},initializePageManager:function(){return this.pageManager=new Aedu.RegPath.PageManagerView({el:this.ui.$pageContent,steps:this.steps(),headerText:this.ui.$headerText})},skipNamePage:function(){return MobileRegPath.user_exists||!1},skipSentEmailPage:function(){return MobileRegPath.user_confirmed||!1},skipSentEmailFbPage:function(){return MobileRegPath.user_exists||!MobileRegPath.user_confirmed}})}.call(this),function(){this.MobileRegPath.EnterEmailPage=Backbone.View.extend({id:"email-page",stepNumber:1,headerText:"Enter your email address",template:"mobile_reg_path/templates/pages/enter_email_page",events:{"submit .js-mobile-signup-modal-email-form":"submitEmail","change input.js-email":"toggleSubmitButton","keydown input.js-email":"toggleSubmitButton","keyup input.js-email":"toggleSubmitButton","keydown input.js-email":"logEmailTyping"},initialize:function(){return this.sentLog=!1,this.render()},render:function(){return this.$el.html(JST[this.template]()),this.postRender()},postRender:function(){return $(".js-modal-page-header").html=this.headerText,this.ui={$email:this.$(".js-email"),$submit:this.$(".js-submit-email")},this.ui.$email.focus()},checkEmail:function(){return $.ajax({type:"POST",url:$r.partial_create_registrations_path(),data:{partial_registration:{email:this.model.get("email"),attachment_id:this.model.get("attachment_id")}}})},saveEmail:function(){return this.model.set({email:this.ui.$email.val()})},submitEmail:function(e){return e.preventDefault(),MobileRegPath.notifier.notifyAndLog("attempted_submit_email"),this.saveEmail(),this.checkEmail().done(function(e){return function(t){return t.email_invalid===!0?(alert("Please enter a valid email"),MobileRegPath.notifier.notifyAndLog("validation_failure",{attachment_id:e.model.get("attachment_id"),error:"email_invalid"})):t.user_exists===!0?(MobileRegPath.notifier.notifyAndLog("email_valid",{attachment_id:e.model.get("attachment_id"),location:"existing_user"}),MobileRegPath.user_exists=!0,e.trigger("step_complete")):(MobileRegPath.notifier.notifyAndLog("email_valid",{attachment_id:e.model.get("attachment_id"),location:"new_user"}),MobileRegPath.user_exists=!1,e.trigger("step_complete"))}}(this)).fail(function(){return alert("Something went wrong")})},disableSubmitButton:function(){return this.ui.$submit.attr("disabled",!0).removeClass("Button--green").addClass("Button--disabled")},enableSubmitButton:function(){return this.ui.$submit.removeAttr("disabled").removeClass("Button--disabled").addClass("Button--green")},toggleSubmitButton:function(){return this.ui.$email.val().length>0?this.enableSubmitButton():this.disableSubmitButton()},logEmailTyping:function(){return this.sentLog||MobileRegPath.notifier.notifyAndLog("started_typing",{attachment_id:this.model.get("attachment_id"),location:"user_email"}),this.sentLog=!0}})}.call(this),function(){this.MobileRegPath.EnterNamePage=Backbone.View.extend({id:"name-page",stepNumber:2,headerText:"Enter your name and password",template:"mobile_reg_path/templates/pages/enter_name_page",events:{"submit .js-mobile-signup-modal-final-form":"toNextPage","change input":"toggleSubmitButtonAndLog","keydown input":"toggleSubmitButtonAndLog","keyup input":"toggleSubmitButtonAndLog"},initialize:function(){return this.log={user_first_name:!1,user_last_name:!1,user_password:!1},this.render()},render:function(){return this.$el.html(JST[this.template]()),this.postRender(),this},postRender:function(){return this.ui={$password:this.$(".js-password"),$submit:this.$(".js-submit-name"),$first_name:this.$(".js-first-name"),$last_name:this.$(".js-last-name")},this.ui.$first_name.focus()},saveFields:function(){return this.model.set({password:this.ui.$password.val(),first_name:this.ui.$first_name.val(),last_name:this.ui.$last_name.val()})},generateErrorMessages:function(e){var t;return 0===e.length?"Something went wrong":(t=[],e.forEach(function(e){return"user[display_name]"!==e[0]?t.push(e[1]):void 0}),t.join("\n"))},toNextPage:function(e){return e.preventDefault(),MobileRegPath.notifier.notifyAndLog("attempted_submit"),this.saveFields(),this.model.save().done(function(e){return function(t){var n,i,r;return r=t[0],n=t[1],i=t[2],r?(window.$current_user=JSON.parse(n.user),Aedu.User.set_current($current_user),MobileRegPath.user_confirmed=!Aedu.User.current.unconfirmed,e.trigger("step_complete")):(MobileRegPath.notifier.notifyAndLog("validation_failure",{error:JSON.stringify(i)}),alert(e.generateErrorMessages(i)))}}(this)).fail(function(){return alert("Something went wrong")})},disableSubmitButton:function(){return this.ui.$submit.attr("disabled",!0).removeClass("Button--green").addClass("Button--disabled")},enableSubmitButton:function(){return this.ui.$submit.removeAttr("disabled").removeClass("Button--disabled").addClass("Button--green")},toggleSubmitButtonAndLog:function(e){return this.ui.$password.val().length>0&&this.ui.$first_name.val().length>0&&this.ui.$last_name.val().length>0?this.enableSubmitButton():this.disableSubmitButton(),this.log[e.target.id]?void 0:(MobileRegPath.notifier.notifyAndLog("started_typing",{location:e.target.id}),this.log[e.target.id]=!0)}})}.call(this),function(){this.MobileRegPath.SentEmailPage=Backbone.View.extend({id:"sent-email-page",stepNumber:3,headerText:" ",template:"mobile_reg_path/templates/pages/sent_email_page",initialize:function(){return this.render()},render:function(){return this.$el.html(JST[this.template]()),this}})}.call(this),function(){this.MobileRegPath.SentEmailWithFbPage=Backbone.View.extend({id:"sent-email-fb-page",stepNumber:3,headerText:" ",template:"mobile_reg_path/templates/pages/sent_email_with_fb_page",events:{"click .js-swp-mobile-signup-fb-connect":"connectFB","click .js-sent-email-finished":"toNextPage"},initialize:function(){return this.suggestedUsers=new Aedu.RegPath.SuggestedUsers,this.render()},connectFB:function(){var e,t;return t=function(e){return Facebook.register_connected(e)},e=function(){var e;return e=$r.api_v0_user_following_index_path({user_id:$current_user.id,subdomain_param:"api"}),$.getJSON(e)},Facebook.authorize().then(t).then(e).done(function(e){return function(t){var n,i,r,o;for(r=t.following,n=0,i=r.length;i>n;n++)o=r[n],Aedu.User.current.record_follow_of(o.id);return e.suggestedUsers.fetch(),e.disableFacebookButton(),alert("Facebook connect success")}}(this)).fail(function(){return alert("Facebook connect fail")})},render:function(){return this.$el.html(JST[this.template]()),this.postRender()},postRender:function(){return this.userSuggestionsView=new MobileRegPath.SuggestedUserListView({collection:this.suggestedUsers})},toNextPage:function(){return this.suggestedUsers.save(),this.trigger("step_complete")},disableFacebookButton:function(){return $(".js-swp-mobile-signup-fb-connect").removeClass("Button--facebook").addClass("Button--disabled").attr("disabled",!0).html("<i class='fa fa-facebook'></i>&nbsp;&nbsp; connected")}})}.call(this),function(){this.MobileRegPath.SuggestedUserView=Backbone.View.extend({tagName:"li",className:"u-borderTop1 u-borderColorGray u-pt2x u-mt2x",template:"mobile_reg_path/templates/suggested_user",initialize:function(){var e;return e=$a.is_logged_in()&&(Aedu.User.current.follows(this.model.get("user").id)||0===this.model.get("sources").length||_.contains(this.model.get("sources"),"AuthorsBookmarked")),this.model.set("followedByCurrentUser",e),this.render()},render:function(){return this.$el.html(JST[this.template]({suggestion:this.model.toJSON(),reason:this.reason(this.model.get("sources"))})),this},reason:function(e){return _.contains(e,"Owner")?"Author":_.contains(e,"AuthorsBookmarked")?"Co-Author":0===e.length?"Facebook Friend":user.affiliationString()}})}.call(this),function(){this.MobileRegPath.SuggestedUserListView=Backbone.View.extend({el:$("ul.js-user-suggestions-list"),initialize:function(){return this.changeButton=!0,this.listenTo(this.collection,"sync",function(e){return function(){var t;return t=e.collection.filter(function(e){return MobileRegPath.author===e.get("user").id&&e.get("sources").push("Owner"),_.contains(MobileRegPath.workCoauthors,e.get("user").id)&&e.get("sources").push("AuthorsBookmarked"),!0}),e.collection.reset(t),e.collection.length>0?(e.collection.each(function(t){return e.addUser(t),e.changeButton?e.changeButton=e.checkSource(t):void 0}),e.showFollowAllButton(),e.changeButton?e.changeFollowAllToContinue():void 0):e.noResults()}}(this))},addUser:function(e){var t;return t=new MobileRegPath.SuggestedUserView({model:e}),$(this.$el.selector).append(t.el)},noResults:function(){return $(this.$el.selector).append(JST["mobile_reg_path/templates/no_suggested_users"])},showFollowAllButton:function(){return $(".js-mobile-follow-all").removeClass("hidden"),$(".js-suggested-academics").removeClass("hidden")},changeFollowAllToContinue:function(){return $(".js-sent-email-finished").removeClass("Button--green").addClass("Button--inverseGray").text("continue")},checkSource:function(e){return _.contains(e.get("sources"),"AuthorsBookmarked")||0===e.get("sources").length}})}.call(this),function(){this.MobileRegPath.newUser=Backbone.Model.extend({save:function(){return this.savingToServer?void 0:(this.savingToServer=!0,$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:$r.registrations_path(),data:this.dataForSave(),complete:function(e){return function(){return e.savingToServer=!1}}(this)}))},dataForSave:function(){var e;return e={user:{email:this.get("email"),first_name:this.get("first_name"),last_name:this.get("last_name"),password:this.get("password")},doc_id:this.get("attachment_id"),user_source:this.get("user_source"),splash:this.get("splash"),login_redirect:this.get("login_redirect"),user_occupation:this.get("user_occupation")},JSON.stringify(e)}})}.call(this),function(){this.SessionModal={},this.SessionModal.pubSub=_.extend({},Backbone.Events)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SessionModal.Base=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.notifier=new c.Server.Notification("sutd")},n.prototype.render=function(){return $("#overlay_background").css({opacity:".6"}),$("#overlay_background").show(),this.$el.fadeIn()},n.prototype.close=function(){return this.$el.fadeOut(),$("#overlay_background").fadeOut()},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SessionModal.CoauthorSignup=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click .js-btn-email":"clickEmailButton"},n.prototype.initialize=function(e){return this.coauthor=e.invitedCoauthor},n.prototype.clickEmailButton=function(){var e;return(null!=(e=this.coauthor)?e.eligibleForAutoRegister():void 0)?(this.$(".js-btn-email").button("loading"),this.coauthor.autoRegister().fail(function(e){return function(){return e.$(".js-btn-email").button("reset"),e.toggleEmailForm()}}(this))):this.toggleEmailForm()},n.prototype.toggleEmailForm=function(){return this.$(".js-email-form-toggle").toggleClass("hidden")},n}(Backbone.View)}.call(this),function(){Aedu.SingleWork={},this.SingleWork={preview_controller:null,register_preview_view:function(e,t){return this.preview_controller.register_view(e,t)},show_preview:function(e){return this.preview_controller.show(e)}}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.AttachmentPreviewController=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click .js-preview-attachment-button[data-preview-attachment-id]":"previewLinkClicked"},n.prototype.initialize=function(e){var t;return e.attachment&&(this.attachment=e.attachment,this.updateUI()),e.multiple_viewable_attachments?(t=this,new HoverPopover({el:".js-viewable-attachments-button",show_delay:200,hide_delay:300,html:!0,content:this.getPopoverContent,on_shown:function(){return t.$popover_el=this.$el}})):void 0},n.prototype.previewLinkClicked=function(e){var t;return t=$(e.currentTarget).data("preview-attachment-id"),this.attachment.id!==t?(this.attachment.id=t,this.attachment.index=$(e.currentTarget).data("preview-attachment-index"),this.updateUI()):void 0},n.prototype.updateUI=function(){return SingleWork.show_preview(this.attachment.id),this.$(".js-preview-attachment-button[data-preview-attachment-id] .js-active-attachment-preview").removeClass("active-preview"),$(".js-work-download-button-container[data-preview-attachment-id]").addClass("hidden"),this.$(".js-preview-attachment-button[data-preview-attachment-id='"+this.attachment.id+"'] .js-active-attachment-preview").addClass("active-preview"),$(".js-work-download-button-container[data-preview-attachment-id='"+this.attachment.id+"']").removeClass("hidden"),this.$(".js-viewable-attachments-preview-index").text(this.attachment.index+1)},n.prototype.getPopoverContent=function(){return $(".js-viewable-attachments-popover-content").html()},n}(Backbone.View)}.call(this),function(){SingleWork.CoauthorTagApi=function(){function e(){}return e.accept=function(e,t){return this._setAccepted(e,t,!0)},e.ignore=function(e,t){return this._setAccepted(e,t,!1)},e.reset=function(e,t){return this._setAccepted(e,t,null)},e._setAccepted=function(e,t,n){return $.ajax({type:"PUT",dataType:"json",contentType:"application/json",url:$r.api_v0_work_co_author_tag_path({subdomain_param:"api",id:e,work_id:t}),data:JSON.stringify({accepted:n,coauthor_invite:this._tokenFromUrl()})})},e._tokenFromUrl=function(){return $a.query_param("coauthor_invite")},e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.CoauthorTagIgnoreModal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.events={"click #coauthor-tag-undo-ignore":"undoIgnore"},n.prototype.show=function(){return this.$el.modal("show"),this},n.prototype.render=function(){return this.$el.modal({show:!1}),this},n.prototype.undoIgnore=function(){return this.$el.modal("hide"),SingleWork.CoauthorTagApi.reset(this.options.tag_id,this.options.work_id),SingleWork.ExternalCoauthorTagModal.open(this.options.tag_id,this.options.work_id)},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.CoauthorTagToolbar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.id="coauthor-tag-request-toolbar",n.prototype.template="single_work/templates/coauthor_request_toolbar_ds",n.prototype.className="row coauthor-tag-request-toolbar-ds DesignSystem alert clearfix",n.prototype.events={"click .js-ignore-coauthor-tag-request":"ignoreCoauthorRequest","click .js-accept-coauthor-tag-request":"acceptCoauthorRequest"},n.prototype.initialize=function(e){return this.options=e},n.prototype.render=function(){return this.$el.html(JST[this.template]()),this},n.prototype.close=function(){return $(".work-body-wrapper").removeClass("coauthor-toolbar-present"),this.remove()},n.prototype.alertSuccess=function(){return this.$el.removeClass("alert-warning alert-danger"),this.$el.addClass("alert-success text-center"),this.$(".coauthor-tag-request-prompt").text("You have successfully been added as a co-author!"),this.hideActions()},n.prototype.alertError=function(){return this.$el.removeClass("alert-warning"),this.$el.addClass("alert-danger"),this.$(".coauthor-tag-request-prompt").text("Oops! We encountered an error and failed to process your request.")},n.prototype.hideActions=function(){return this.$(".js-coauthor-ignore").hide(),this.$(".js-coauthor-accept").hide(),this.$(".js-coauthor-msg").removeClass("col-xs-9").addClass("col-xs-12").addClass("u-taCenter")},n.prototype.acceptCoauthorRequest=function(){},n.prototype.ignoreCoauthorRequest=function(){},n}(Backbone.View)}.call(this),function(){SingleWork.CsvView=function(){function e(e){this.container=e.container,this.identifier=e.identifier,this.attachment_id=e.attachment_id,this.$container=$(this.container),this.content=null}return e.prototype.show=function(){var e;return this.$container.find(".info_box").hide(),this.$container.find(".csv_preview_loader").show(),null!==this.content?this.$container.html(this.content):(e=$r.attachment_csv_preview_path({attachment_id:this.attachment_id}),$.ajax({url:e,dataType:"json",success:function(e){return function(t){return e.content=t.content,e.$container.html(e.content)}}(this),error:function(e){return function(){return e.$container.find(".csv_preview_loader").hide(),e.$container.find(".info_box").show()}}(this)}))},e}()}.call(this),$(".js-swp-view-discussion-tooltip").tooltip({placement:function(){var e=$(window).scrollTop(),t=$(".js-swp-view-discussion-tooltip").offset().top,n=t-e,i=32;return n>i?"top":"bottom"}}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.ExternalCoauthorTagModal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.open=function(e,t,n,i){var r,o;return r=new SingleWork.ExternalCoauthorTagModal({el:".js-coauthor-invite-modal",tag_id:e,work_id:t,coauthor:n,abTestsHash:i}),r.render().show(),o=new SingleWork.ExternalCoauthorTagToolbar({tag_id:e,work_id:t,ab_tests_hash:i}),$(".work-body-wrapper").prepend(o.render().el)},n.prototype.events={"click .js-coauthor-invite-accept-button":"acceptCoauthorRequest"},n.prototype.initialize=function(){return this.abTestsHash=this.options.abTestsHash,this.notify("external_coauthor_invite_modal_render"),n.__super__.initialize.apply(this,arguments),this.coauthor=this.options.coauthor},n.prototype.show=function(){return this.$el.modal("show"),this},n.prototype.render=function(){return this.$el.modal({show:!1}),this.postRender(),this},n.prototype.postRender=function(){return this.ui={$acceptButtonText:this.$(".js-coauthor-invite-accept-text"),$acceptButtonSpinner:this.$(".js-coauthor-invite-accept-spinner")}},n.prototype.showSignupModal=function(e){return this.notify("external_coauthor_invite_verify_modal_render",{reason:e}),this.$el.modal("hide"),$(".coauthor-verify-modal").modal("show")},n.prototype.acceptCoauthorRequest=function(){var e;return this.notify("external_coauthor_invite_accept",{location:"modal"}),(null!=(e=this.coauthor)?e.eligibleForAutoRegister():void 0)?this.autoRegisterUser():this.showSignupModal("one_click_ineligible")},n.prototype.autoRegisterUser=function(){return this.showAcceptSpinner(),this.coauthor.autoRegister().fail(function(e){return function(){return e.hideAcceptSpinner(),e.showSignupModal("error_fallback")}}(this))},n.prototype.hideAcceptSpinner=function(){return this.ui.$acceptButtonText.removeClass("hidden"),this.ui.$acceptButtonSpinner.addClass("hidden")},n.prototype.showAcceptSpinner=function(){return this.ui.$acceptButtonText.addClass("hidden"),this.ui.$acceptButtonSpinner.removeClass("hidden")},n.prototype.alertSuccess=function(){return this.$el.removeClass("alert-warning alert-danger"),this.$el.addClass("alert-success text-center"),this.$(".coauthor-tag-request-prompt").text("You have successfully been added as a co-author!"),this.hideActions()},n.prototype.alertError=function(){return this.$el.removeClass("alert-warning"),this.$el.addClass("alert-danger"),this.$(".coauthor-tag-request-prompt").text("Oops! We encountered an error and failed to process your request.")},n.prototype.notify=function(e,t){var n;return null==t&&(t={}),n=new c.Server.Notification("coauthors_flow"),n.notify(_.extend({},t,{event:e,work_id:this.options.work_id,tag_id:this.options.tag_id,ab_tests:this.abTestsHash}))},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.ExternalCoauthorTagToolbar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.acceptCoauthorRequest=function(){return this.notify("external_coauthor_invite_accept",{location:"toolbar"}),this.showSignupModal()},n.prototype.ignoreCoauthorRequest=function(){return SingleWork.CoauthorTagApi.ignore(this.options.tag_id,this.options.work_id),this.close()},n.prototype.showSignupModal=function(){return $(".coauthor-verify-modal").modal("show")},n.prototype.render=function(){return UserSource.remember("coauthor_invite"),this.notify("external_coauthor_invite_toolbar_render"),n.__super__.render.apply(this,arguments)},n.prototype.notify=function(e,t){var n;return null==t&&(t={}),n=new c.Server.Notification("coauthors_flow"),n.notify({event:e,work_id:this.options.work_id,tag_id:this.options.tag_id,location:null!=t.location?t.location:void 0,ab_tests:this.options.ab_tests_hash})},n}(SingleWork.CoauthorTagToolbar)}.call(this),function(){SingleWork.IFrameView=function(){function e(e){this.container=e.container,this.identifier=e.identifier,this.$container=$(this.container)}return e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.InternalCoauthorTagToolbar=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.autoAccept=function(){return this.acceptCoauthorRequest()},n.prototype.acceptCoauthorRequest=function(){return $a.is_logged_in()?SingleWork.CoauthorTagApi.accept(this.options.tag_id,this.options.work_id).done(function(e){return function(){return e.alertSuccess()}}(this)).fail(function(e){return function(){return e.alertError()}}(this)):$("#nav_log_in").click()},n.prototype.ignoreCoauthorRequest=function(){return $a.is_logged_in()?SingleWork.CoauthorTagApi.ignore(this.options.tag_id,this.options.work_id).done(function(e){return function(){return e.close()}}(this)).fail(function(e){return function(){return e.alertError()}}(this)):$("#nav_log_in").click()},n}(SingleWork.CoauthorTagToolbar)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);
return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.PendingExternalCoauthor=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return UserSource.remember("coauthor_invite"),n.__super__.initialize.apply(this,arguments)},n.prototype.eligibleForAutoRegister=function(){return this.get("allow_one_click_register")&&this.get("first_name")&&this.get("last_name")&&this.get("email")&&this.get("token")},n.prototype.autoRegister=function(){var e;return e=new $.Deferred,$.ajax({type:"POST",url:"/registrations",data:{user:{first_name:this.get("first_name"),last_name:this.get("last_name"),email:this.get("email")},no_password:!0,coauthor_token:this.get("token"),coauthor_work:this.get("work_id"),user_source:"coauthor_invite"},dataType:"json",xhrFields:{withCredentials:!0}}).done(function(){return function(t){var n,i,r;return r=t[0],n=t[1],i=t[2],r?(e.resolve(),document.location.href="/StartRegPath"):e.reject()}}(this)).fail(function(){return function(){return e.reject()}}(this)),e},n}(Backbone.Model)}.call(this),function(){SingleWork.PreviewController=function(){function e(){this.views={},this.current_identifier=null}return e.prototype.show=function(e){return this.current_identifier&&this._hide_view(this.current_identifier),this.current_identifier=e,this._show_view(e)},e.prototype.register_view=function(e,t){if(null!=this.views[e])throw"Can't register multiple views for the same identifier!";return this.views[e]=t,this.current_identifier===e?this._show_view(e):void 0},e.prototype._show_view=function(e){var t;return this._view_container(e).show(),null!=(t=this.views[e])&&"function"==typeof t.show?t.show():void 0},e.prototype._hide_view=function(e){var t;return null!=(t=this.views[e])&&"function"==typeof t.tear_down&&t.tear_down(),this._view_container(e).hide()},e.prototype._view_container=function(e){return $(".attachment_preview[data-attachment="+e+"]")},e}(),SingleWork.preview_controller=new SingleWork.PreviewController}.call(this),function(){var e=3,t=10;Aedu.SingleWork.PremiumBookmarkListSidebar=React.createClass({displayName:"PremiumBookmarkListSidebar",propTypes:{readEvents:React.PropTypes.array.isRequired},getInitialState:function(){return{numVisibleBookmarks:e}},increaseNumVisibleBookmarks:function(){this.setState({numVisibleBookmarks:this.state.numVisibleBookmarks+t})},renderBookmarkRow:function(e){return React.createElement("li",{className:"media_v2",key:e.id},React.createElement("div",{className:"media-left"},React.createElement("a",{href:e.reader.url},React.createElement("img",{className:"Avatar--md media-object",src:$image_url(e.reader.photo),alt:e.reader.display_name}))),React.createElement("div",{className:"media-body u-lineHeight1_2",style:{maxWidth:"196px"}},React.createElement("a",{href:e.reader.url,className:"u-tcGrayDarkest u-fw700 u-fs13 u-textTruncate"},e.reader.display_name),e.reader.position&&React.createElement("div",{className:"u-tcGrayDarkest u-fs12 u-textTruncate"},React.createElement("i",{className:"fa fa-briefcase u-fs10"}),"\xa0\xa0",e.reader.position),e.reader.department&&React.createElement("div",{className:"u-tcGrayDarkest u-fs12 u-textTruncate"},React.createElement("i",{className:"fa fa-university u-fs10"}),"\xa0\xa0",React.createElement("a",{href:e.reader.department.university.url,className:"u-tcGrayDarkest"},e.reader.department.university.name))))},render:function(){var e=this.props.readEvents.length-this.state.numVisibleBookmarks;return React.createElement("div",{className:"panel panel-flat"},React.createElement("div",{className:"panel-body u-p6x"},React.createElement("div",{className:"u-tcGrayDark u-textUppercase u-fw700"},"Bookmarkers"),React.createElement("div",{className:"u-mv3x clearfix"}),React.createElement("ul",{className:"media-list u-m0x"},_.chain(this.props.readEvents).first(this.state.numVisibleBookmarks).map(this.renderBookmarkRow).value())),e>0&&React.createElement("div",null,React.createElement("div",{className:"panel-horizontal-split"}),React.createElement("div",{className:"panel-body u-taCenter u-textUppercase u-tcGrayDark u-fw700 u-displayBlock u-clickable",onClick:this.increaseNumVisibleBookmarks},e," More")))}})}(),function(){Aedu.SingleWork.PremiumBookmarkListSidebarContainer=React.createClass({displayName:"PremiumBookmarkListSidebarContainer",propTypes:{workId:React.PropTypes.number.isRequired},getInitialState:function(){return{loading:!0}},componentDidMount:function(){$.getJSON($r.read_events_api_v0_bookmarkers_path({work_id:this.props.workId,subdomain_param:"api"})).done(function(e){this.setState({readEvents:e.read_events,loading:!1})}.bind(this))},render:function(){return this.state.loading?React.createElement("div",{className:"panel panel-flat"},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"u-p5x u-taCenter"},React.createElement("i",{className:"fa fa-spinner fa-spin"})))):React.createElement(Aedu.SingleWork.PremiumBookmarkListSidebar,{readEvents:this.state.readEvents})}})}(),function(){Aedu.SingleWork.PremiumBookmarksUpgradeSidebar=React.createClass({displayName:"PremiumBookmarksUpgradeSidebar",propTypes:{bookmarkCount:React.PropTypes.number.isRequired,workId:React.PropTypes.number.isRequired},render:function(){return React.createElement("div",{className:"panel panel-flat"},React.createElement("div",{className:"panel-body u-taCenter u-p8x"},React.createElement("div",{className:"u-border1 u-taCenter u-displayInlineBlock",style:{padding:"9px",margin:"0 auto",borderRadius:"50%",borderColor:"#6288a5 !important",width:"40px"}},React.createElement("i",{className:"fa fa-bookmark u-tcBlue"})),React.createElement("div",{className:"u-mv2x clearfix"}),React.createElement("span",{className:"u-tcBlue u-fw700"},"See Your Bookmarkers"),React.createElement("div",{className:"u-mv2x clearfix"}),React.createElement("span",{className:"u-bgColorRed badge"},this.props.bookmarkCount),"\xa0\xa0",React.createElement("span",{className:"u-tcGrayDarker"},"This Paper")),React.createElement("div",{className:"panel-horizontal-split"}),React.createElement("a",{href:$r.upgrade_url({feature:"readers",trigger:"swp-sidebar-bookmarks-widget",after_upgrade_work_id:this.props.workId}),className:"panel-body u-taCenter u-textUppercase u-tcGrayDarker u-fw700 u-displayBlock"},"LEARN MORE"))}})}(),function(){Aedu.SingleWork.PremiumBookmarksUpgradeSidebarContainer=React.createClass({displayName:"PremiumBookmarksUpgradeSidebarContainer",propTypes:{workId:React.PropTypes.number.isRequired},getInitialState:function(){return{loading:!0}},componentDidMount:function(){$.getJSON($r.api_v0_works_bookmark_counts_path({work_ids:[this.props.workId],subdomain_param:"api"})).done(function(e){this.setState({bookmarkCount:e.bookmark_counts[this.props.workId],loading:!1})}.bind(this))},render:function(){return this.state.loading?React.createElement("div",{className:"panel panel-flat"},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"u-p5x u-taCenter"},React.createElement("i",{className:"fa fa-spinner fa-spin"})))):React.createElement(Aedu.SingleWork.PremiumBookmarksUpgradeSidebar,{bookmarkCount:this.state.bookmarkCount,workId:this.props.workId})}})}(),function(){SingleWork.RepoView=function(){function e(e){this._set_repo_widths(),_.each(this.constructor_options,function(t){return function(n){return t[n]=e[n]}}(this)),this.$container=$(this.container)}return e.prototype.constructor_options=["container","user","repo","identifier"],e.prototype.defaults={expanded:"966px",unexpanded:"760px"},e.prototype.show=function(){return req("repo",function(e){return function(){return e.$container.append("<div class='inner_repo'></div>"),e.$repo=e.$container.find(".inner_repo"),e.$repo.width(e.defaults.unexpanded),e.$repo.repo({user:e.user,name:e.repo}),e.$repo.on("not_found",function(){return e.not_found()}),e.$repo.on("api_limited",function(){return e.api_limited()})}}(this))},e.prototype.not_found=function(){var e;return null!=(e=this.$repo)&&e.find(".repo").hide(),this.$container.find(".not_found").show()},e.prototype.api_limited=function(){var e;return null!=(e=this.$repo)&&e.find(".repo").hide(),this.$container.find(".api_limited").show()},e.prototype.unsupported_browser=function(){var e;return null!=(e=this.$repo)&&e.find(".repo").hide(),this.$container.find(".unsupported_browser").show()},e.prototype.tear_down=function(){return this.$repo.remove()},e.prototype._set_repo_widths=function(){var e;return e=$.trim($("#site").attr("class").replace("fixed","")),"w_1160"===e?(this.defaults.expanded="1060px",this.defaults.unexpanded="880px"):"w_1340"===e?(this.defaults.expanded="1246px",this.defaults.unexpanded="1050px"):"w_1780"===e?(this.defaults.expanded="1680px",this.defaults.unexpanded="1500px"):void 0},e}()}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/coauthor_request_toolbar"]=function(){var e=[];return e.push('<span class="coauthor-tag-request-prompt">You have been tagged as a co-author!</span><div class="coauthor-tag-request-actions pull-right"><span class="js-ignore-coauthor-tag-request ignore-coauthor-tag-request clickable">IGNORE</span><button class="js-accept-coauthor-tag-request btn btn-lg btn-success accept-coauthor-tag-request u-textUppercase">ACCEPT</button></div>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/coauthor_request_toolbar_ds"]=function(){var e=[];return e.push('<div style="line-height:44px" class="js-coauthor-msg col-xs-9 u-fs14 u-fw700"><span>You have been tagged as a co-author!</span></div><div style="line-height:44px" class="js-coauthor-ignore col-xs-1 u-tcGray"><div class="js-ignore-coauthor-tag-request ignore-coauthor-tag-request clickable">IGNORE</div></div><div class="js-coauthor-accept col-xs-2"><button class="js-accept-coauthor-tag-request Button Button--green Button--block accept-coauthor-tag-request"><span>ACCEPT</span></button></div>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/splash_single_step_signup_form"]=function(e){var t,n=[],i=e||{};return function(e,i){n.push('<div class="a-fadeInDown"><div class="u-taCenter u-mb2x"><h4 class="u-tcGrayDarker u-fw700">Sign Up to Download</h4></div><form class="js-swp-splash-single-step-signup-form container-fluid u-mt8x"><div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="row u-mb4x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="js-swp-splash-single-step-signup-first-name swp-splash-single-step-singup-input TextInput TextInput--xl"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="js-swp-splash-single-step-signup-last-name swp-splash-single-step-singup-input TextInput TextInput--xl"/></div></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input placeholder="Email" type="email" id="user_email" class="js-swp-splash-single-step-signup-email swp-splash-single-step-singup-input TextInput TextInput--xl"/></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="js-swp-splash-single-step-signup-password swp-splash-single-step-singup-input TextInput TextInput--xl"/></div></div><div class="row"><div class="col-xs-12 u-ph0x"><button type="submit" data-broccoli-component="sutd-work-splash-signup-button" class="swp-splash-signup-submit Button Button--block Button--green Button--xl"><i'+jade.cls(["fa","fa-lg","fa-"+("pdf"===e?"file-pdf-o":"file-text-o")],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(t="pdf"===e?"PDF":"FILE")?"":t)+'</button></div></div><div class="row"><div class="col-xs-12 u-ph0x u-taCenter"><div class="u-tcGrayDark u-pt2x">Already have an account?\n&nbsp;<a'+jade.attr("href",i,!0,!1)+' class="u-linkUnstyled u-textDecorationUnderline">Sign in</a></div></div></div></div></div></form></div>')}.call(this,"attachmentType"in i?i.attachmentType:"undefined"!=typeof attachmentType?attachmentType:void 0,"loginUrl"in i?i.loginUrl:"undefined"!=typeof loginUrl?loginUrl:void 0),n.join("")}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.VerifyFulltextModal=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.workId=e.workId,this.attachmentId=e.attachmentId,this.notifier=new Aedu.Server.Notification("paper_uploads"),n.__super__.initialize.call(this,{mainText:"Confirm full-text attachment",confirmButtonText:"CONFIRM",cancelButtonText:"REMOVE",confirmButtonClasses:"btn-success",subText:"Is this the text of your paper, "+e.title+"?"}),this.once("confirm",function(e){return function(){return e.notifyEvent("fulltext_confirmed")}}(this)),this.once("cancel",function(e){return function(){return e.removeAttachment(),e.notifyEvent("fulltext_removed")}}(this)),this.notifyEvent("verify_fulltext_shown")},n.prototype.notifyEvent=function(e){return this.notifier.notify({event:e,user_id:Aedu.User.current.id,work_id:this.workId,attachment_id:this.attachmentId})},n.prototype.removeAttachment=function(){var e;return e=$r.api_v0_attachment_path({id:this.attachmentId,subdomain_param:"api"}),$.post(e,{_method:"DELETE"},function(e){return function(){return window.location="/"+e.workId}}(this))},n}(ConfirmModal)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.AddAttachmentButton_v2=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.ui={$button_text:this.$(".btn-text"),$error_alert:this.$(".error-text")},this.done=e.done||function(){},this.uploader=new app.views.Uploader_v2({dropZone:this.$el,input:this.$("input[type=file]"),source:e.source,work_id:e.work_id,event_recorder:e.event_recorder}),this.uploader.on("add",this._clear_errors,this).on("progress",_.throttle(this._show_progress,200),this).on("fail",this._show_failure,this).on("error",this._show_errors,this).on("done",this._show_complete,this),this.$el.show(),this.uploader._record_event("swp_upload_file_shown")},n.prototype.events={"click input[type=file]":"_file_input_clicked"},n.prototype._file_input_clicked=function(){return this.uploader._record_event("upload_file_clicked")},n.prototype._show_progress=function(e){return this.ui.$button_text.text(Math.floor(e.loaded/e.total*100)+"%")},n.prototype._clear_errors=function(){return this.ui.$error_alert.hide()},n.prototype._show_errors=function(e){var t,n;return t={file_name_length:"File name is too long to upload. Please shorten and try again.",file_size:"Please choose a smaller file (less than "+$h.humanFileSize(this.uploader.max_file_size)+").",file_type:"Sorry, we don't support that file type."},n=Object.keys(e[0])[0],this.ui.$error_alert.show().text(t[n]),this.done({success:!1,message:t[n]})},n.prototype._show_failure=function(){return this.done({success:!1,message:"Something went wrong. Please try again"}),alert("Something went wrong")},n.prototype._show_complete=function(e){return this.ui.$button_text.text("Upload Complete"),this.done({success:!0,attachment:e.result.attachment})},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SingleWork.SplashSingleStepSignupForm=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="single_work/templates/splash_single_step_signup_form",n.prototype.events={"submit .js-swp-splash-single-step-signup-form":"submitSignup","keydown .js-swp-splash-single-step-signup-first-name":"logTyping","keydown .js-swp-splash-single-step-signup-email":"logTyping","keydown .js-swp-splash-single-step-signup-last-name":"logTyping","keydown .js-swp-splash-single-step-signup-password":"logTyping","focus .js-swp-splash-single-step-signup-email":"expandEmailForm"},n.prototype.initialize=function(e){var t;return this.log={user_email:!1,user_first_name:!1,user_last_name:!1,user_password:!1},this.notifier=new c.Server.Notification("sutd"),t=function(){var e;return e=encodeURIComponent(window.location.href+"?auto=download"),"/login?post_login_redirect_path="+e},this.render({attachmentType:e.attachmentType,loginUrl:t()})},n.prototype.render=function(e){return this.$el.html(JST[this.template](e)),this.postRender()},n.prototype.postRender=function(){return this.ui={$first_name:this.$(".js-swp-splash-single-step-signup-first-name"),$last_name:this.$(".js-swp-splash-single-step-signup-last-name"),$password:this.$(".js-swp-splash-single-step-signup-password"),$occupation:this.$(".js-swp-splash-single-step-signup-occupation"),$email:this.$(".js-swp-splash-single-step-signup-email"),$emailForm:this.$(".js-swp-splash-signup-email-form-collapsed"),$googleButton:this.$(".js-swp-splash-single-step-signup-google-button"),$facebookButton:this.$(".js-swp-splash-single-step-signup-facebook-button")},new Aedu.Auth.OauthButton.Connect.Facebook({el:this.ui.$facebookButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id"),splash:!0}}),new Aedu.Auth.OauthButton.Connect.Google({el:this.ui.$googleButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id"),splash:!0}})},n.prototype.expandEmailForm=function(){return this.ui.$emailForm.collapse("show")},n.prototype.saveFields=function(){return this.model.set({email:this.ui.$email.val(),first_name:this.ui.$first_name.val(),last_name:this.ui.$last_name.val(),password:this.ui.$password.val(),user_occupation:this.ui.$occupation.val(),splash:!0})},n.prototype.renderErrorHTML=function(e){return"<div class='js-swp-splash-input-inner-error swp-splash-input-inner-error u-tcRed a-fadeInDownShort'>"+e+"</div>"},n.prototype.displayErrors=function(e){var t;return t=$(this.ui.$first_name).add(this.ui.$last_name).add(this.ui.$password).add(this.ui.$email).add(this.ui.$occupation),t.removeClass("TextInput--error").css({"padding-top":0}),this.$(".js-swp-splash-input-inner-error").remove(),_.each(e,function(e){return function(t){var n,i;return i=t[0],n=t[1],"user[email]"===i&&e.showErrorForInput(e.ui.$email,n),"user[first_name]"===i&&e.showErrorForInput(e.ui.$first_name,n),"user[last_name]"===i&&e.showErrorForInput(e.ui.$last_name,n),"user[password]"===i&&e.showErrorForInput(e.ui.$password,n),"user[occupation]"===i?e.showErrorForInput(e.ui.$occupation,n):void 0}}(this))},n.prototype.showErrorForInput=function(e,t){return e.addClass("TextInput--error").after(this.renderErrorHTML(t.replace(/\.$/g,""))).css({"padding-top":10})},n.prototype.submitSignup=function(e){return e.preventDefault(),this.saveFields(),this.model.save().done(function(e){return function(t){var n,i,r;return r=t[0],n=t[1],i=t[2],r?window.location.replace(n.redirect):(e.notify("validation_failure",{error:JSON.stringify(i)}),e.displayErrors(i))}}(this)).fail(function(){return alert("Something went wrong")})},n.prototype.notify=function(e,t){return null==t&&(t={}),this.notifier.notify({event_type:e,attachment_id:this.model.get("attachment_id"),auvid:$auvid,location:null!=t.location?t.location:void 0,error:null!=t.error?t.error:void 0})},n.prototype.logTyping=function(e){return this.log[e.target.id]||this.notify("started_typing",{location:e.target.id}),this.log[e.target.id]=!0},n}(Backbone.View)}.call(this),function(){Aedu.SignupToDownload||(Aedu.SignupToDownload={}),Aedu.SignupToDownload.notifier=new c.Server.Notification("sutd"),Aedu.SignupToDownload.notifier.notifyAndLog=function(e,t){return null==t&&(t={}),$a.log(e),this.notify({event_type:e,attachment_id:t.attachment_id?t.attachment_id:void 0,auvid:$auvid,location:t.location?t.location:void 0,error:t.error?t.error:void 0})}}.call(this),function(){this.JST||(this.JST={}),this.JST["signup_to_download/templates/layout"]=function(e){var t,n=[],i=e||{};return function(e,i,r,o,a,s){n.push('<div class="DesignSystem"><div style="width:460px" class="modal-dialog"><div class="modal-content u-overflowHidden"><div class="modal-header container-fluid u-p0x"><div class="row u-pv6x"><div class="col-xs-8 col-xs-offset-2"><div class="u-taCenter u-fs14 u-fw700 u-tcGrayDarkest u-textUppercase u-letterSpacing1">'+jade.escape(null==(t=s)?"":t)+"</div></div>"),a&&n.push('<div class="col-xs-2"><button data-dismiss="modal" class="js-close-full-modal u-floatRight Close u-fw400 u-fs20 u-mr4x">&times;</button></div>'),n.push('</div></div><div class="modal-body container-fluid u-p10x"><div class="row u-mb10x"><div class="col-xs-12"><div class="u-taCenter"><div class="u-tcGrayDarkest u-lineHeight1_4 u-fontSerif u-fs22">'+jade.escape(null==(t=o)?"":t)+'</div></div></div></div><div class="row u-mb5x"><div class="col-xs-6 u-pr2x"><button id="google-signup-button" class="Button Button--google Button--block Button--lg"><i class="fa fa-google-plus fa-lg"></i>&nbsp;&nbsp;Connect</button></div><div class="col-xs-6 u-pl2x"><button id="fb-signup-button" class="Button Button--facebook Button--block Button--lg"><i class="fa fa-facebook-square fa-lg"></i>&nbsp;&nbsp;Connect</button></div></div><div class="row u-mb5x"><div class="col-xs-12"><div class="hr-heading login-hr-heading"><span class="hr-heading-text">or</span></div></div></div><form class="js-modal-title-form container-fluid"><div class="row u-mb5x"><div class="col-xs-12 u-ph0x TextInputWrapper--icon u-floatLeft"><input placeholder="Email" type="email" id="user_email" class="TextInput TextInput--xl js-modal-title-email swp-splash-single-step-singup-input"/><i class="fa fa-envelope-o u-tcGrayDark js-modal-title-envelope"></i></div></div><div class="row"><div class="col-xs-12 collapse js-modal-title-form-collapsed"><div class="row u-mb5x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="TextInput TextInput--xl js-modal-title-first-name swp-splash-single-step-singup-input"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="TextInput TextInput--xl js-modal-title-last-name swp-splash-single-step-singup-input"/></div></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="TextInput TextInput--xl js-modal-title-password swp-splash-single-step-singup-input"/></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><button type="submit" class="js-modal-signup-submit swp-splash-signup-submit Button Button--block Button--lg Button--green">'),n.push(i?jade.escape(null==(t=i)?"":t):"<i"+jade.cls(["fa","fa-lg","pdf"===e?"fa-file-pdf-o":"fa-file-text-o"],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(t="pdf"===e?"PDF":"FILE")?"":t)),n.push('</button></div></div></div></div><div class="row"><div class="col-xs-12 u-ph0x u-taCenter"><div class="u-fw400 u-fs12 u-tcGrayDark">Already have an account?\n&nbsp;<a'+jade.attr("href",r,!0,!1)+' class="u-linkUnstyled u-textDecorationUnderline u-tcBlue">Log in</a></div></div></div></form></div></div></div></div>')}.call(this,"attachmentType"in i?i.attachmentType:"undefined"!=typeof attachmentType?attachmentType:void 0,"buttonText"in i?i.buttonText:"undefined"!=typeof buttonText?buttonText:void 0,"loginUrl"in i?i.loginUrl:"undefined"!=typeof loginUrl?loginUrl:void 0,"message"in i?i.message:"undefined"!=typeof message?message:void 0,"showCloseButton"in i?i.showCloseButton:"undefined"!=typeof showCloseButton?showCloseButton:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0),n.join("")}}.call(this),function(){Aedu.SignupToDownload.Layout=Backbone.View.extend({template:"signup_to_download/templates/layout",className:"modal fade",events:{"focus .js-modal-title-email":"expandEmailForm","click .js-modal-signup-submit":"submitSignup","click .js-modal-terms-link":"termsClicked","keydown .js-modal-title-first-name":"logTyping","keydown .js-modal-title-last-name":"logTyping","keydown .js-modal-title-password":"logTyping","keydown .js-modal-title-email":"logTyping"},initialize:function(e){return null==e&&(e={}),this.model=new MobileRegPath.newUser({attachment_id:e.attachmentId,login_redirect:e.loginRedirect,user_source:e.userSource}),this.data={loginUrl:e.loginUrl||"/login",message:e.message,attachmentType:null!=e.attachmentType?e.attachmentType:void 0,title:e.title,buttonText:e.buttonText,showCloseButton:e.showCloseButton},this.log={user_email:!1,user_first_name:!1,user_last_name:!1,user_password:!1},this.render(this.data)},render:function(e){return this.$el.html(JST[this.template](e)),this.postRender()},postRender:function(){return this.ui={$emailForm:this.$(".js-modal-title-form-collapsed"),$googleButton:this.$("#google-signup-button"),$facebookButton:this.$("#fb-signup-button"),$firstName:this.$(".js-modal-title-first-name"),$lastName:this.$(".js-modal-title-last-name"),$password:this.$(".js-modal-title-password"),$email:this.$(".js-modal-title-email"),$envelope:this.$(".js-modal-title-envelope")},new Aedu.Auth.OauthButton.Connect.Facebook({el:this.ui.$facebookButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id")}}),new Aedu.Auth.OauthButton.Connect.Google({el:this.ui.$googleButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id")}}),this.$el.modal({backdrop:"static",keyboard:!1}),this.$el.on("hidden.bs.modal",function(){return Aedu.SignupToDownload.notifier.notifyAndLog("download_closed")})},expandEmailForm:function(){return this.ui.$emailForm.collapse("show")},submitSignup:function(e){return e.preventDefault(),Aedu.SignupToDownload.notifier.notifyAndLog("attempted_submit"),this.saveFields(),this.model.savingToServer?void 0:this.model.save().done(function(e){return function(t){var n,i,r;return r=t[0],n=t[1],i=t[2],r?e.redirectToPage(n.redirect):(Aedu.SignupToDownload.notifier.notifyAndLog("validation_failure",{error:JSON.stringify(i)}),e.displayErrors(i))}}(this)).fail(function(){return alert("Something went wrong")})},saveFields:function(){return this.model.set({email:this.ui.$email.val(),first_name:this.ui.$firstName.val(),last_name:this.ui.$lastName.val(),password:this.ui.$password.val()})},renderErrorHTML:function(e){return"<div class='js-swp-splash-input-inner-error swp-splash-input-inner-error u-tcRed a-fadeInDownShort'>"+e+"</div>"},displayErrors:function(e){var t;return t=$(this.ui.$firstName).add(this.ui.$lastName).add(this.ui.$password).add(this.ui.$email),t.removeClass("TextInput--error").css({"padding-top":0}),this.ui.$envelope.css({"padding-top":0}),this.$(".js-swp-splash-input-inner-error").remove(),_.each(e,function(e){return function(t){var n,i;return i=t[0],n=t[1],"user[email]"===i&&e.showErrorForEmail(e.ui.$email,n),"user[first_name]"===i&&e.showErrorForInput(e.ui.$firstName,n),"user[last_name]"===i&&e.showErrorForInput(e.ui.$lastName,n),"user[password]"===i?e.showErrorForInput(e.ui.$password,n):void 0}}(this))},showErrorForInput:function(e,t){return e.addClass("TextInput--error").after(this.renderErrorHTML(t.replace(/\.$/g,""))).css({"padding-top":10})},showErrorForEmail:function(e,t){return e.addClass("TextInput--error").css({"padding-top":10}),this.ui.$envelope.after(this.renderErrorHTML(t.replace(/\.$/g,""))).css({"padding-top":5})},termsClicked:function(){return Aedu.SignupToDownload.notifier.notifyAndLog("terms",{auvid:$auvid})},logTyping:function(e){return this.log[e.target.id]?void 0:(Aedu.SignupToDownload.notifier.notifyAndLog("started_typing",{location:e.target.id}),this.log[e.target.id]=!0)},redirectToPage:function(e){return window.location.replace(e)}})}.call(this),function(){this.SidebarSuggestions||(this.SidebarSuggestions={})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestionsCollection=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.on("sync",function(){return this.displayable().length<=0?this.trigger("empty"):void 0}),this},n.prototype.ensureMinDisplayable=function(e){return this.displayable().length<e&&!this._fetching&&(this._fetching=!0,this.fetch().always(function(e){return function(){return e._fetching=!1}}(this))),this.once("remove",function(){return this.ensureMinDisplayable(e)})},n}(Backbone.Collection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedCertification=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.set("id",e.work.id),n.__super__.initialize.apply(this,arguments)},n.prototype.url=function(){return $r.api_v0_suggestions_certification_path({id:this.id,subdomain_param:"api"})},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedCertifications=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedCertification,n.prototype.url=$r.api_v0_suggestions_certifications_path({subdomain_param:"api"}),n.prototype.displayable=function(e){return this.slice(this.length-e,this.length)},n.prototype.parse=function(e){return null!=e?e.certifications:void 0},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedCoauthor=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.saveSuggestion=function(e){var t;return t=$.extend(this.get("tags")[0],{accepted:e,source:"coauthor_suggestions_sidebar"}),$.ajax({url:$r.api_v0_suggestions_coauthors_path({subdomain_param:"api"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(t)})},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedDiscussion=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedDiscussions=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedDiscussion,n.prototype.url=$r.api_v0_suggestions_discussions_path({subdomain_param:"api",count:5}),n.prototype.parse=function(e){return null!=e?e.discussions:void 0},n.prototype.displayable=function(e){return this.slice(this.length-e,this.length)},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedHistory=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.set("id",e.work.id),n.__super__.initialize.apply(this,arguments)},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedHistorys=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedHistory,n.prototype.url=$r.api_v0_suggestions_histories_path({subdomain_param:"api"}),n.prototype.displayable=function(){return this.slice(0,this.length>3?3:this.length)
},n.prototype.parse=function(e){return null!=e?e.histories:void 0},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedInterest=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.set("id",e.interest.id),n.__super__.initialize.apply(this,arguments)},n.prototype.url=function(){return $r.api_v0_suggestions_interest_path({id:this.get("interest").id,subdomain_param:"api",s:this.sourceString()})},n.prototype.sourceString=function(){return this.get("sources").sort().join(",")},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedInterests=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedInterest,n.prototype.url=$r.api_v0_suggestions_interests_path({subdomain_param:"api",count:12}),n.prototype.parse=function(e){return null!=e?e.interests:void 0},n.prototype.displayable=function(e){return this.filter(function(e){return!Aedu.User.current.has_interest(e.get("interest").id)}).slice(0,e)},n.prototype.removeById=function(e){var t;return t=this.findWhere({id:e}),this.remove(t),t},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedJob=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments)},n.prototype.url=function(){return $r.randomized_last_api_v0_suggestions_jobs_path({subdomain_param:"api"})},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedUser=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return this.set("id",e.user.id),n.__super__.initialize.apply(this,arguments)},n.prototype.url=function(){return $r.api_v0_suggestions_following_path({id:this.get("user").id,subdomain_param:"api",s:this.sourceString()})},n.prototype.sourceString=function(){return this.get("sources").sort().join(",")},n.prototype.followData=function(){return{"data-follow-user-id":this.get("user").id,"data-follow-user-source":"sidebar_suggestion","data-follow-user-src-details":{sources:this.sourceString()},"data-follow-user-fname":this.get("user").first_name}},n.prototype.reason=function(e){var t,n,i,r,o,a,s;return null==e&&(e={}),n=e.includeLinkedNames,o=e["short"],s=this.get("user"),a=_(this.get("sources")),r=n?this._linkedName(s,s.first_name):s.first_name,a.include("AuthorsBookmarked")?o?"Bookmarked by you.":"You have bookmarked "+r+"'s research.":a.include("FollowedByFollowees")&&(t=this._connectingUserLinks(n)).length>0?o?r+" is followed by your people you know.":r+" is followed by "+$h.to_sentence(t.slice(0,3))+".":a.include("DepartmentColleagues")&&this.departmentName()&&this.universityName()?o?r+" is a colleague.":r+" is a colleague in "+this.departmentName()+" at "+this.universityName():a.include("FollowedBySimilarFollowers")?o?r+" is followed by academics like you.":r+" is followed by people who follow the same other academics as you.":a.include("FollowedBySimilarBookmarkers")?o?r+" is followed by academics with similar bookmarks.":r+" is followed by academics who have bookmarked the same works as you.":a.include("TopResearchInterestUsers")&&(i=this._commonInterestNames()).length>0?o?r+" is a top researcher in "+i[0]+".":r+" is among the top researchers in "+$h.to_sentence(i.slice(0,3))+" on Academia.edu.":Aedu.User.current.followee_ids.length>0?r+" is similar to other academics you follow.":r+" is someone you might know."},n.prototype.universityName=function(){var e,t;return null!=(e=this.get("user").department)&&null!=(t=e.university)?t.name:void 0},n.prototype.departmentName=function(){var e;return null!=(e=this.get("user").department)?e.name:void 0},n.prototype._commonInterestNames=function(){var e,t,n,i,r,o;if(o=this.get("user"),o.interests&&Aedu.User.current.interests){for(i=o.interests,r=[],t=0,n=i.length;n>t;t++)e=i[t],Aedu.User.current.has_interest(e.id)&&r.push(e.name);return r}return[]},n.prototype._connectingUserLinks=function(e){var t,n;return null==e&&(e=!0),t=this.get("connecting_users"),t&&e?_.shuffle(function(){var e,i,r;for(r=[],e=0,i=t.length;i>e;e++)n=t[e],r.push(this._linkedName(n,n.display_name));return r}.call(this)):t?_.shuffle(function(){var e,i,r;for(r=[],e=0,i=t.length;i>e;e++)n=t[e],r.push(n.display_name);return r}()):[]},n.prototype._linkedName=function(e,t){return $("<a/>").attr("href",e.url).addClass("u-tcGray u-textDecorationUnderline").text(t)[0].outerHTML},n}(Backbone.Model)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedUsers=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedUser,n.prototype.initialize=function(e,t){return null==t&&(t=10),this.url=$r.api_v0_suggestions_following_index_path({subdomain_param:"api",count:t}),n.__super__.initialize.apply(this,arguments)},n.prototype.parse=function(e){return null==(null!=e?e.following:void 0)?[]:_(e.following).map(function(e){var t;return new SidebarSuggestions.SuggestedUser({sources:e.sources,user:Aedu.User.from_json(e.user),connecting_users:function(){var n,i,r,o;for(r=e.connecting_users||[],o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push(Aedu.User.from_json(t));return o}()})})},n.prototype.displayable=function(e){return this.filter(function(e){return!Aedu.User.current.follows(e.get("user").id)}).slice(0,e)},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.TrendingWork=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.url=function(){return $r.trending_api_v0_suggestions_works_path({subdomain_param:"api"})},n}(Backbone.Model)}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_affiliation"]=function(e){var t,n=[],i=e||{};return function(e){n.push('<div class="Panel u-mb5x"><div class="Panel-header u-p5x"><div class="js-sidebar-add-affiliation-university u-taCenter u-fw700 u-tcGrayDark">'+jade.escape(null==(t=e)?"":t)+'</div></div><div class="Panel-bodySegment u-p5x u-taCenter"><div class="newsfeed-sidebar-oauth-actions-new"><a class="Button js-news-sidebar-add-affiliation">&nbsp;&nbsp;Edit Affiliation</a></div></div></div><div class="DesignSystem"><div class="modal js-news-add-affiliation-modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><div class="modal-title"></div><div class="modal-body"><div class="js-newsfeed-add-affiliation-modal-body"></div></div></div></div></div></div></div>')}.call(this,"guessText"in i?i.guessText:"undefined"!=typeof guessText?guessText:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_certifications"]=function(e){var t,n=[],i=e||{};return function(e,i,r,o){n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var i=o;if("number"==typeof i.length)for(var a=0,s=i.length;s>a;a++){var l=i[a],u=l.get("work");n.push("<li"+jade.attr("id","certify_work_"+u.id,!0,!1)+' class="Panel-bodySegment u-p5x"><a'+jade.attr("href",u.internal_url,!0,!1)+" data-sidebar-truncate-to-lines='3' class=\"js-sidebar-truncate u-fw700 u-tcGrayDarker\">"+jade.escape(null==(t=u.title)?"":t)+'</a><div class="u-p1x"></div><div class="u-textTruncate u-tcGray"><a'+jade.attr("data-work-title",u.title,!0,!1)+jade.attr("data-work-id",u.id,!0,!1)+jade.attr("data-field-follower-count",l.get("potential_reach"),!0,!1)+' disabled="disabled" class="js-certification-button u-tcGreen u-fw700 u-clickable"><i class="fa fa-check">&nbsp;&nbsp;</i>Recommend</a><span>&nbsp; | &nbsp;</span><a'+jade.attr("href",u.authors[0].url,!0,!1)+jade.attr("data-has-card-for-user",u.authors[0].id,!0,!1)+' class="u-tcGray">'+jade.escape(null==(t=u.authors[0].display_name)?"":t)+"</a><script"+jade.attr("data-card-contents-for-user",u.authors[0].id,!0,!1)+' type="text/json">'+(null==(t=e.encodeHTML(r.stringify(u.authors[0])))?"":t)+"</script></div></li>")}else{var s=0;for(var a in i){s++;var l=i[a],u=l.get("work");n.push("<li"+jade.attr("id","certify_work_"+u.id,!0,!1)+' class="Panel-bodySegment u-p5x"><a'+jade.attr("href",u.internal_url,!0,!1)+" data-sidebar-truncate-to-lines='3' class=\"js-sidebar-truncate u-fw700 u-tcGrayDarker\">"+jade.escape(null==(t=u.title)?"":t)+'</a><div class="u-p1x"></div><div class="u-textTruncate u-tcGray"><a'+jade.attr("data-work-title",u.title,!0,!1)+jade.attr("data-work-id",u.id,!0,!1)+jade.attr("data-field-follower-count",l.get("potential_reach"),!0,!1)+' disabled="disabled" class="js-certification-button u-tcGreen u-fw700 u-clickable"><i class="fa fa-check">&nbsp;&nbsp;</i>Recommend</a><span>&nbsp; | &nbsp;</span><a'+jade.attr("href",u.authors[0].url,!0,!1)+jade.attr("data-has-card-for-user",u.authors[0].id,!0,!1)+' class="u-tcGray">'+jade.escape(null==(t=u.authors[0].display_name)?"":t)+"</a><script"+jade.attr("data-card-contents-for-user",u.authors[0].id,!0,!1)+' type="text/json">'+(null==(t=e.encodeHTML(r.stringify(u.authors[0])))?"":t)+"</script></div></li>")}}}.call(this),n.push("<li><a"+jade.attr("href",i.certifications_suggestions_path(),!0,!1)+" class=\"u-tcGrayDark\"><div class=\"Panel-footer u-p5x u-taCenter\"><span class=\"u-fw700\">View All</span></div></a></li></ul><script src=\"//cdn.rawgit.com/inorganik/countUp.js/v1.3.3/countUp.min.js\"></script><script type=\"text/javascript\">(function() {\n  req_and_ready('certifications');\n  $('.js-certification-button').on('click', showCertifyModal);\n  function showCertifyModal(evt) {\n    var $button = $(this),\n      workId = parseInt($button.data('work-id')),\n      params = {\n        workTitle: $button.data('work-title'),\n        workId: workId,\n        fieldFollowerCount: parseInt($button.data('field-follower-count')),\n        source: 'newsfeed_sidebar',\n        onCertify: function() {$('#certify_work_' + workId).fadeOut('slow')}\n      };\n    Components.Utils.showModal(Certifications.Modals.CertificationModal, params)\n  }\n})();</script>")}.call(this,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"$r"in i?i.$r:"undefined"!=typeof $r?$r:void 0,"JSON"in i?i.JSON:"undefined"!=typeof JSON?JSON:void 0,"suggestions"in i?i.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in i?i.undefined:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_coauthor"]=function(e){var t,n=[],i=e||{};return function(e,i,r,o){n.push('<div class="Media"><div class="Media--left Media--middle">'),r=e.get("profile_picture_url"),o=e.get("affiliated_university"),n.push("undefined"!=typeof r&&null!==r&&o?"<img"+jade.attr("src",r,!0,!1)+' class="avatar-md"/>':'<div class="avatar-md bg-gray-lighter u-taCenter valign-wrapper"><i class="fa fa-inverse fa-envelope-o fa-sm valign-item"></i></div>'),n.push('</div><div class="Media-body"><div style="width:200px" class="u-tcGrayDarker u-fw700 u-textTruncate">'+jade.escape(null==(t=e.get("name"))?"":t)+'</div><div style="width:200px" class="u-tcGrayDark u-pt1x u-textTruncate"><i class="fa fa-file-o"> </i>&nbsp;&nbsp;'+jade.escape(null==(t=e.get("tags")[0].title)?"":t)+'</div></div></div><div class="js-expanded-content hidden"><div class="Media"><div class="Media--left Media--middle"><div class="avatar-md"></div></div><div class="Media-body u-mv2x u-tcGrayDark u-pt1x">'),"undefined"!=typeof o&&null!==o?n.push('<i class="fa fa-university"></i>&nbsp;&nbsp;'+jade.escape(null==(t=o)?"":t)):(n.push('<i class="fa fa-envelope-o"> </i>&nbsp;&nbsp;'),i=e.get("obfuscated_email"),n.push("undefined"!=typeof i&&null!==i?jade.escape(null==(t=i)?"":t):'<input class="js-coauthor-email"/>')),n.push('</div></div><div class="row u-m0x"><div class="col-xs-6 u-pr2x u-pl0x u-taCenter"><a class="js-coauthor-reject-coauthor Button Button--block Button--sm Button--inverseGray"><i class="fa fa-times"></i>&nbsp;&nbsp;Dismiss</a></div><div class="col-xs-6 u-pl2x u-pr0x u-taCenter"><a class="js-coauthor-accept-coauthor Button Button--block Button--sm Button--blue u-pl4x"><i class="fa fa-plus"></i>&nbsp;&nbsp;Confirm</a></div></div></div>')}.call(this,"coauthor"in i?i.coauthor:"undefined"!=typeof coauthor?coauthor:void 0,"email"in i?i.email:"undefined"!=typeof email?email:void 0,"photo"in i?i.photo:"undefined"!=typeof photo?photo:void 0,"university_name"in i?i.university_name:"undefined"!=typeof university_name?university_name:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_coauthors"]=function(){var e=[];return e.push('<ul class="u-listStyleNone u-pl0x u-mb0x"></ul>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_discussion"]=function(e){var t,n=[],i=e||{};return function(e,i,r,o){var a=o.chair,s=e.build_url(o.url,[["source","sidebar"]]);n.push("<a"+jade.attr("href",s,!0,!1)+' class="text-bold u-tcGrayDarker js-suggested-discussion-name">'+jade.escape(null==(t=o.name)?"":t)+'</a><div class="discussion-suggestion-info u-mt1x"><a'+jade.attr("href",s,!0,!1)+' class="text-bold">Join</a><span class="u-tcGray"><span>&nbsp; | &nbsp;</span><a'+jade.attr("href",s,!0,!1)+' class="u-tcGray"><i class="fa fa-users u-pr2x"></i>'+jade.escape(null==(t=o.participant_count)?"":t)+"</a><span>&nbsp; | &nbsp;</span><a"+jade.attr("href",a.url,!0,!1)+jade.attr("data-has-card-for-user",a.id,!0,!1)+' class="u-tcGray">'+jade.escape(null==(t=a.display_name)?"":t)+"<script"+jade.attr("data-card-contents-for-user",a.id,!0,!1)+' type="text/json">'+(null==(t=i.encodeHTML(r.stringify(a)))?"":t)+"</script></a></span></div>")}.call(this,"$a"in i?i.$a:"undefined"!=typeof $a?$a:void 0,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"JSON"in i?i.JSON:"undefined"!=typeof JSON?JSON:void 0,"suggestion"in i?i.suggestion:"undefined"!=typeof suggestion?suggestion:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_discussions"]=function(){var e=[];return e.push('<!-- Required by SuggestionListView. TODO: Refactor suggestions code so--><!-- this template isn\'t needed.--><ul class="list-unstyled margin-bottom-0x"></ul>'),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_history"]=function(e){var t,n=[],i=e||{};return function(e,i,r,o){n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var a=o;if("number"==typeof a.length)for(var s=0,l=a.length;l>s;s++){var u=a[s],c=u.get("work"),d=c.authors[0];n.push('<li class="Panel-bodySegment u-p5x"><a'+jade.attr("href",c.internal_url,!0,!1)+" data-sidebar-truncate-to-lines='2' class=\"js-sidebar-truncate u-fw700 u-tcGrayDarker\">"+jade.escape(null==(t=c.title)?"":t)+"</a><div><a"+jade.attr("href",d.url,!0,!1)+jade.attr("data-has-card-for-user",d.id,!0,!1)+' class="u-tcGrayDark u-displayInline">'+jade.escape(null==(t=d.display_name)?"":t)+"</a><script"+jade.attr("data-card-contents-for-user",d.id,!0,!1)+' type="text/json">'+(null==(t=e.encodeHTML(r.stringify(d)))?"":t)+'</script><div class="u-tcGrayLight js-sidebar-truncate u-displayInline">&nbsp; | &nbsp;'+jade.escape(null==(t=new i.User(d).affiliationString())?"":t)+"</div></div></li>")}else{var l=0;for(var s in a){l++;var u=a[s],c=u.get("work"),d=c.authors[0];n.push('<li class="Panel-bodySegment u-p5x"><a'+jade.attr("href",c.internal_url,!0,!1)+" data-sidebar-truncate-to-lines='2' class=\"js-sidebar-truncate u-fw700 u-tcGrayDarker\">"+jade.escape(null==(t=c.title)?"":t)+"</a><div><a"+jade.attr("href",d.url,!0,!1)+jade.attr("data-has-card-for-user",d.id,!0,!1)+' class="u-tcGrayDark u-displayInline">'+jade.escape(null==(t=d.display_name)?"":t)+"</a><script"+jade.attr("data-card-contents-for-user",d.id,!0,!1)+' type="text/json">'+(null==(t=e.encodeHTML(r.stringify(d)))?"":t)+'</script><div class="u-tcGrayLight js-sidebar-truncate u-displayInline">&nbsp; | &nbsp;'+jade.escape(null==(t=new i.User(d).affiliationString())?"":t)+"</div></div></li>")}}}.call(this),n.push('<li><a href="/ReadingHistory" class="u-tcGrayDark"><div class="Panel-footer u-p5x u-taCenter"><span class="u-fw700">View All</span></div></a></li></ul>')}.call(this,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"Aedu"in i?i.Aedu:"undefined"!=typeof Aedu?Aedu:void 0,"JSON"in i?i.JSON:"undefined"!=typeof JSON?JSON:void 0,"suggestions"in i?i.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in i?i.undefined:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_interests"]=function(e){var t,n=[],i=e||{};return function(e,i){n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var r=i;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var s=r[o],l=s.get("interest");n.push("<li"+jade.attr("id","ri_suggestion_"+s.get("id"),!0,!1)+' class="followee-suggestion Panel-bodySegment u-p5x close-container"><div class="Media"><div'+jade.attr("data-ignore-suggested-ri-id",l.id,!0,!1)+' class="pull-right sidebar-close clickable"><a class="u-tcGrayLight u-textDecorationNone sidebar-close">&times;</a></div><div class="Media--middle Media--left"><a'+jade.attr("href",l.url,!0,!1)+' class="u-tcGrayDarker"><span class="u-fw700 js-sidebar-truncate">'+jade.escape(null==(t=l.name)?"":t)+'</span></a><div class="u-mt1x u-fs13"><a'+jade.attr("data-follow-ri-id",l.id,!0,!1)+' class="u-tcGreen u-fw700 clickable">Follow</a><span class="u-tcGray u-textTruncate u-displayInline">&nbsp; | &nbsp;'+jade.escape(null==(t=e.commaizeInt(l.follower_count))?"":t)+"&nbsp;Followers</span></div></div></div></li>")}else{var a=0;for(var o in r){a++;var s=r[o],l=s.get("interest");n.push("<li"+jade.attr("id","ri_suggestion_"+s.get("id"),!0,!1)+' class="followee-suggestion Panel-bodySegment u-p5x close-container"><div class="Media"><div'+jade.attr("data-ignore-suggested-ri-id",l.id,!0,!1)+' class="pull-right sidebar-close clickable"><a class="u-tcGrayLight u-textDecorationNone sidebar-close">&times;</a></div><div class="Media--middle Media--left"><a'+jade.attr("href",l.url,!0,!1)+' class="u-tcGrayDarker"><span class="u-fw700 js-sidebar-truncate">'+jade.escape(null==(t=l.name)?"":t)+'</span></a><div class="u-mt1x u-fs13"><a'+jade.attr("data-follow-ri-id",l.id,!0,!1)+' class="u-tcGreen u-fw700 clickable">Follow</a><span class="u-tcGray u-textTruncate u-displayInline">&nbsp; | &nbsp;'+jade.escape(null==(t=e.commaizeInt(l.follower_count))?"":t)+"&nbsp;Followers</span></div></div></div></li>")}}}.call(this),n.push("</ul>")}.call(this,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"suggestions"in i?i.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in i?i.undefined:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_jobs"]=function(e){var t,n=[],i={},r=e||{};return function(e){i.media=t=function(e){this&&this.block,this&&this.attributes||{};n.push('<div class="media_v2 u-mt0x"><div class="media-body media-middle"><a data-broccoli-component="job-title"'+jade.attr("href",e.url,!0,!1)+' style="width:190px" class="u-tcBlue u-fw700">'+jade.escape(null==(t=e.title)?"":t)+"</a></div></div>")},n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var r=e;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var s=r[o],l=s.get("job");n.push("<li"+jade.attr("id","job_"+l.id,!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(l),n.push(l.universities.length>0?'<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">'+jade.escape(null==(t=l.universities[0].name)?"":t)+"</div>":'<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">'+jade.escape(null==(t=l.location)?"":t)+"</div>"),n.push("</li>")}else{var a=0;for(var o in r){a++;var s=r[o],l=s.get("job");n.push("<li"+jade.attr("id","job_"+l.id,!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(l),n.push(l.universities.length>0?'<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">'+jade.escape(null==(t=l.universities[0].name)?"":t)+"</div>":'<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">'+jade.escape(null==(t=l.location)?"":t)+"</div>"),n.push("</li>")}}}.call(this),n.push("</ul>")}.call(this,"suggestions"in r?r.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in r?r.undefined:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_users"]=function(e){var t,n=[],i={},r=e||{};return function(e){i.media=t=function(e,i){this&&this.block,this&&this.attributes||{};n.push('<div class="media_v2 u-mt0x"><div class="media-left media-middle u-pr3x"><img'+jade.attr("src",i.photo,!0,!1)+' class="Avatar Avatar--sm"/></div><div class="media-body media-middle"><a'+jade.attr("href",i.url,!0,!1)+' style="width:190px" class="u-tcGrayDarker u-fw700 u-textTruncate">'+jade.escape(null==(t=i.display_name)?"":t)+'</a><ul class="InlineList InlineList--bordered"><li'+jade.attrs(jade.merge([{"class":"InlineList-item u-tcGreen u-fs13 u-lineHeight0 u-clickable"},e.followData()]),!1)+'><i class="fa fa-plus"></i>&nbsp;\nFollow</li><li'+jade.attr("data-ignore-suggested-user-id",i.id,!0,!1)+' data-broccoli-component="sidebar-user-ignore" class="InlineList-item u-tcGrayDark u-fs13 u-lineHeight0 u-clickable"><i class="fa fa-remove"></i>&nbsp;\nIgnore</li></ul></div></div>')},n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var r=e;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var s=r[o],l=s.get("user");n.push("<li"+jade.attr("id","user_suggestion_"+s.get("id"),!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(s,l),n.push("<span data-sidebar-truncate-to-lines='1' class=\"js-sidebar-truncate u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x\">"+jade.escape(null==(t=l.affiliationString())?"":t)+'</span><br/><span class="u-tcGray u-fs11 u-lineHeight1_3 u-displayInlineBlock">'+(null==(t=s.reason({includeLinkedNames:!0}))?"":t)+"</span></li>")}else{var a=0;for(var o in r){a++;var s=r[o],l=s.get("user");n.push("<li"+jade.attr("id","user_suggestion_"+s.get("id"),!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(s,l),n.push("<span data-sidebar-truncate-to-lines='1' class=\"js-sidebar-truncate u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x\">"+jade.escape(null==(t=l.affiliationString())?"":t)+'</span><br/><span class="u-tcGray u-fs11 u-lineHeight1_3 u-displayInlineBlock">'+(null==(t=s.reason({includeLinkedNames:!0}))?"":t)+"</span></li>")}}}.call(this),n.push("</ul>")}.call(this,"suggestions"in r?r.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in r?r.undefined:void 0),n.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["sidebar_suggestions/templates/suggested_works"]=function(e){var t,n=[],i={},r=e||{};return function(e){i.media=t=function(e){this&&this.block,this&&this.attributes||{};n.push('<div class="media_v2 u-mt0x"><div class="media-body media-middle"><a'+jade.attr("href",e.internal_url,!0,!1)+' style="width:190px" data-broccoli-component="trending-works" class="u-tcBlue u-fw700">'+jade.escape(null==(t=e.title)?"":t)+"</a></div></div>")},n.push('<ul class="u-listStyleNone u-pl0x u-mb0x">'),function(){var r=e;if("number"==typeof r.length)for(var o=0,a=r.length;a>o;o++){var s=r[o],l=s.get("work");n.push("<li"+jade.attr("id","work_"+l.id,!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(l),n.push('<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">by&nbsp;'+jade.escape(null==(t=l.authors[0].display_name)?"":t)+"</div></li>")}else{var a=0;for(var o in r){a++;var s=r[o],l=s.get("work");n.push("<li"+jade.attr("id","work_"+l.id,!0,!1)+' class="followee-suggestion u-ph6x u-pb6x close-container">'),i.media(l),n.push('<div class="u-tcGrayDark u-fs12 u-lineHeight1_3 u-displayInlineBlock u-pv2x">by&nbsp;'+jade.escape(null==(t=l.authors[0].display_name)?"":t)+"</div></li>")}}}.call(this),n.push("</ul>")}.call(this,"suggestions"in r?r.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"undefined"in r?r.undefined:void 0),n.join("")}}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestionListView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(e){return n.__super__.initialize.apply(this,arguments),this.template=JST[e.template],this.suggestions=e.suggestions,this._renderOnSync(),this._rerenderOnRemoval(),this},n.prototype.render=function(){var e;return e=this.suggestions.displayable(4),e.length>0?(this.$el.html(this.template({suggestions:e})),this._truncate(),this._addHoverBehavior(e)):this.$el.html("<div class='u-ph6x u-mb6x u-tcGrayDark'>No results found.</div>")},n.prototype._truncate=function(){return this.$(".js-sidebar-truncate").each(function(){var e;return e=$(this),e.trunk8({lines:e.data("sidebar-truncate-to-lines"),tooltip:!0})})},n.prototype._addHoverBehavior=function(e){return _(e).each(function(e){return function(t){var n;return n=e._suggestionElement(t),n&&!n.data("expander")?n.data("expander",new SidebarSuggestions.SuggestionExpander({el:n})):void 0}}(this))},n.prototype._renderOnSync=function(){return this.listenTo(this.suggestions,"sync error",function(e){return function(){return e.render()}}(this))},n.prototype._rerenderOnRemoval=function(){return this.listenTo(this.suggestions,"remove",function(e){return function(t){var n,i;return n=e._suggestionElement(t),n&&(i=n.data("expander"))?i.collapse(function(){return e.render()}):e.render()}}(this))},n.prototype._suggestionElement=function(e){return this.$("*[data-suggestion-id="+e.get("id")+"]")},n}(Backbone.View)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.AffiliationModalController=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="sidebar_suggestions/templates/suggested_affiliation",n.prototype.events={"click .js-news-sidebar-add-affiliation":"openEditor"},n.prototype.initialize=function(){var e;return e=$r.api_v0_suggestions_affiliation_path({subdomain_param:"api"}),$.get(e).done(function(e){return function(t){return t.department?(e.guessedAffiliation=e.getGuessedAffiliation(t),e.render()):void 0}}(this))},n.prototype.render=function(){var e;if(this.universityName())return e=JST[this.template]({guessText:"Are you at "+this.universityName()+"?"}),this.$el.append(e),this.postRender()},n.prototype.postRender=function(){return this.ui={$addAffiliationModal:this.$(".js-news-add-affiliation-modal"),$addAffiliationModalBody:this.$(".js-newsfeed-add-affiliation-modal-body")},this.$el.removeClass("hidden")},n.prototype.universityName=function(){var e,t;return null!=(e=this.guessedAffiliation.get("department"))&&null!=(t=e.university)?t.name:void 0},n.prototype.openEditor=function(){var e;return e=new AffiliationEditor.AffiliationEditView({cancelClass:"Button Button--inverseGray Button--lg Button--halfBlock",cancelAction:function(e){return function(){return e.ui.$addAffiliationModal.modal("hide"),Kale.notify({collectionName:"newsfeed",eventData:{event:"news_feed_affiliation_cancel"}})}}(this),saveClass:"Button Button--green Button--lg Button--halfBlock u-floatRight",saveAction:function(){return Kale.notify({collectionName:"newsfeed",eventData:{event:"news_feed_affiliation_save"}}),window.location.reload()},alwaysPrimary:!0,model:this.guessedAffiliation}),this.ui.$addAffiliationModalBody.append(e.el),this.ui.$addAffiliationModal.modal({show:!0,backdrop:!0,keyboard:!0}),this.ui.$addAffiliationModal.on("hide.bs.modal",function(){return e.remove()}),Kale.notify({collectionName:"newsfeed",eventData:{event:"news_feed_affiliation_open"}})},n.prototype.getGuessedAffiliation=function(e){var t,n,i,r;return i=new Backbone.Model(e),t=new Backbone.Model(Aedu.User.current.affiliation()),n=i.get("department"),n.university||(n=null),r=i.get("position")||this.nullPosition,t.set({department:n,position:r})},n.prototype.nullPosition={id:1},n}(Backbone.View)}.call(this),function(){SidebarSuggestions.CertificationSuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedCertifications,this.suggestions.ensureMinDisplayable(8),this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions}),this._listenForAccept()}return e.prototype.template="sidebar_suggestions/templates/suggested_certifications",e.prototype._listenForAccept=function(){return $(document).on("certification-created",function(e){return function(t,n){return e.suggestions.remove(e.suggestions.findWhere({id:n}))}}(this))},e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.CoauthorSuggestionListView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="ul",n.prototype.className="list-unstyled",n.prototype.render=function(){var e,t,n,i,r,o,a;for(0===this.$el.find("ul").length&&this.$el.html(this.template()),r=this.suggestions.displayable(4),o=[],t=0,n=r.length;n>t;t++)a=r[t],0===this.$el.find("[data-suggestion-id='"+a.cid+"']").length?(e=new SidebarSuggestions.CoauthorSuggestionView({model:a}),i=e.render().el,this.$el.find("ul").append(i),o.push($(i).data("expander",new SidebarSuggestions.SuggestionExpander({el:$(i)})))):o.push(void 0);return o},n}(SidebarSuggestions.SuggestionListView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.CoauthorSuggestionView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="sidebar_suggestions/templates/suggested_coauthor",n.prototype.tagName="li",n.prototype.className="coauthor-suggestion Panel-bodySegment u-p5x",n.prototype.attributes=function(){return{"data-suggestion-id":this.model.cid}},n.prototype.events={"click .js-coauthor-accept-coauthor":"acceptSuggestion","click .js-coauthor-reject-coauthor":"rejectSuggestion","click .js-coauthor-email":"coauthorEmailClicked"},n.prototype.render=function(){return this.$el.empty(),this.$el.append(JST[this.template]({coauthor:this.model})),this},n.prototype.acceptSuggestion=function(){var e;return e=this.model.saveSuggestion(!0),e.done(function(e){return function(){return e.remove()}}(this)),e.fail(function(e){return function(){return e.alertError()}}(this))},n.prototype.rejectSuggestion=function(){var e;return e=this.model.saveSuggestion(!1),e.done(function(e){return function(){return e.remove()}}(this)),e.fail(function(e){return function(){return e.alertError()}}(this))},n.prototype.coauthorEmailClicked=function(e){return e.stopPropagation()
},n.prototype.alertError=function(){return alert("Oops! We encountered an error and failed to process your request.")},n.prototype.remove=function(){return n.__super__.remove.apply(this,arguments),this.model.collection.remove(this.model)},n}(Backbone.View)}.call(this),function(){SidebarSuggestions.CoauthorSuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedCoauthors,this.suggestions.fetch(),this.view=new SidebarSuggestions.CoauthorSuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions})}return e.prototype.template="sidebar_suggestions/templates/suggested_coauthors",e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.DiscussionSuggestionListView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="ul",n.prototype.className="list-unstyled",n.prototype.initialize=function(e){return n.__super__.initialize.call(this,e)},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.suggestions.each(function(e){return function(t){var n;return n=new SidebarSuggestions.DiscussionSuggestionView({model:t}),e.$el.find("ul").append(n.render().el),n.postRender()}}(this)),this},n}(SidebarSuggestions.SuggestionListView)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.DiscussionSuggestionView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.template="sidebar_suggestions/templates/suggested_discussion",n.prototype.tagName="li",n.prototype.className="discussion-suggestion Panel-bodySegment u-p5x",n.prototype.attributes=function(){return{"data-suggestion-id":this.model.get("id")}},n.prototype.render=function(){return this.$el.empty(),this.$el.append(JST[this.template]({suggestion:this.model.toJSON()})),this},n.prototype.postRender=function(){return this.$(".js-suggested-discussion-name").trunk8({lines:2,tooltip:!1})},n}(Backbone.View)}.call(this),function(){SidebarSuggestions.DiscussionSuggestions=function(){function e(e){this.discussion_suggestions=new SidebarSuggestions.SuggestedDiscussions,this.discussion_suggestions.ensureMinDisplayable(1),this.view=new SidebarSuggestions.DiscussionSuggestionListView({el:e.el,template:this.template,suggestions:this.discussion_suggestions})}return e.prototype.template="sidebar_suggestions/templates/suggested_discussions",e}()}.call(this),function(){SidebarSuggestions.HistorySuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedHistorys,this.suggestions.ensureMinDisplayable(8),this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions})}return e.prototype.template="sidebar_suggestions/templates/suggested_history",e}()}.call(this),function(){SidebarSuggestions.InterestSuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedInterests,this.suggestions.ensureMinDisplayable(8),this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions}),this._listenForAcceptOrReject()}return e.prototype.template="sidebar_suggestions/templates/suggested_interests",e.prototype._listenForAcceptOrReject=function(){return this._loadTaggings(),$(document).on("click","*[data-follow-ri-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("follow-ri-id"),$("#ri_suggestion_"+n).fadeOut("slow",function(){var t;return t=e.suggestions.removeById(n)}),e._loadTaggings(function(){return this.taggings.tag({id:n},null,{auto:suggestion.sourceString()}),Aedu.User.current.interests.push(suggestion.get("interest"))})}}(this)),$(document).on("click","*[data-unfollow-ri-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("unfollow-ri-id"),$("#ri_suggestion_"+n).fadeOut("slow",function(){return e.suggestions.removeById(n)}),e._loadTaggings(function(){return this.taggings.untag({id:n}),Aedu.User.current.interests=_.reject(Aedu.User.current.interests,function(e){return e.id===n})})}}(this)),$(document).on("click","*[data-ignore-suggested-ri-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("ignore-suggested-ri-id"),$("#ri_suggestion_"+n).fadeOut("slow",function(){var t;return null!=(t=e.suggestions.findWhere({id:n}))?t.destroy():void 0})}}(this))},e.prototype._loadTaggings=function(e){return req("new_profile",function(){return this.taggings||(this.taggings=new NewProfile.Taggings([],{tag_type:"ResearchInterest",target_type:"User",target_id:$current_user.id,tag_source:"sidebar_suggestion"})),"function"==typeof e?e():void 0})},e}()}.call(this),function(){SidebarSuggestions.JobSuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedJobs,this.suggestions.ensureMinDisplayable(8),this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions}),this.broccoliNotifier=new Aedu.Broccoli({defaultCollection:"ads"})}return e.prototype.template="sidebar_suggestions/templates/suggested_jobs",e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestionExpander=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.initialize=function(){return this.expanded=!1,n.__super__.initialize.apply(this,arguments),this.$expandedContent=this.$el.find(".js-expanded-content"),this},n.prototype.events={mouseenter:"expand",mouseleave:"collapse",click:"toggle"},n.prototype.expand=function(e){return this.expanded=!0,this.$expandedContent.removeClass("hidden").hide().slideDown(200,function(){return function(){return"function"==typeof e?e():void 0}}(this))},n.prototype.collapse=function(e){return this.expanded=!1,this.$expandedContent.slideUp(200,function(t){return function(){return t.$expandedContent.addClass("hidden"),"function"==typeof e?e():void 0}}(this))},n.prototype.toggle=function(){return this.expanded?this.collapse():this.expand()},n}(Backbone.View)}.call(this),function(){SidebarSuggestions.UserSuggestions=function(){function e(e){this.suggestions=new SidebarSuggestions.SuggestedUsers([],12),this.suggestions.ensureMinDisplayable(8),this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions}),this.listenForAcceptOrReject()}return e.prototype.template="sidebar_suggestions/templates/suggested_users",e.prototype.listenForAcceptOrReject=function(){return $(document).on("click","*[data-follow-user-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("follow-user-id"),$("#user_suggestion_"+n).fadeOut("slow",function(){return e.suggestions.remove(e.suggestions.findWhere({id:n}))}),e.recordEvent("followed")}}(this)),$(document).on("click","*[data-unfollow-user-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("unfollow-user-id"),$("#user_suggestion_"+n).fadeOut("slow",function(){return e.suggestions.remove(e.suggestions.findWhere({id:n}))}),e.recordEvent("unfollowed")}}(this)),$(document).on("click","*[data-ignore-suggested-user-id]",function(e){return function(t){var n;return n=$(t.currentTarget).data("ignore-suggested-user-id"),$("#user_suggestion_"+n).fadeOut("slow",function(){var t;return null!=(t=e.suggestions.findWhere({id:n}))?t.destroy():void 0}),e.recordEvent("ignored")}}(this))},e.prototype.recordEvent=function(e){return Kale.notify({collectionName:"newsfeed",eventData:{event:"user_suggestion_"+e}})},e}()}.call(this),function(){SidebarSuggestions.WorkSuggestions=function(){function e(e){null==e&&(e={}),this.suggestions=e.suggestions,this.suggestions.ensureMinDisplayable(3),this.broccoliCollection=e.broccoliCollection,this.view=new SidebarSuggestions.SuggestionListView({el:e.el,template:this.template,suggestions:this.suggestions}),this.broccoliCollection&&(this.broccoliNotifier=new Aedu.Broccoli({defaultCollection:this.broccoliCollection}),this.broccoliNotifier.notify("trending-works__viewed"))}return e.prototype.template="sidebar_suggestions/templates/suggested_works",e}()}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedCoauthors=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedCoauthor,n.prototype.url=$r.api_v0_suggestions_coauthors_path({subdomain_param:"api"}),n.prototype.parse=function(e){return e},n.prototype.displayable=function(e){return this.slice(this.length-e,this.length)},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.SuggestedJobs=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.SuggestedJob,n.prototype.url=$r.randomized_last_api_v0_suggestions_jobs_path({subdomain_param:"api"}),n.prototype.parse=function(e){return null==(null!=e?e.jobs:void 0)?[]:_(e.jobs).map(function(e){return new SidebarSuggestions.SuggestedJob({job:e})})},n.prototype.displayable=function(){return this.filter(function(){return!0})},n}(SidebarSuggestions.SuggestionsCollection)}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;SidebarSuggestions.TrendingWorks=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=SidebarSuggestions.TrendingWork,n.prototype.initialize=function(e,t){return this.url=$r.trending_api_v0_suggestions_works_path({subdomain_param:"api",research_interest_id:t.research_interest_id,work_id:t.work_id}),n.__super__.initialize.apply(this,arguments)},n.prototype.parse=function(e){return null==(null!=e?e.works:void 0)?[]:_(e.works).map(function(e){return new SidebarSuggestions.TrendingWork({work:e})})},n.prototype.displayable=function(){return this.filter(function(){return!0})},n}(SidebarSuggestions.SuggestionsCollection)}.call(this);